<!-- views/rubits/_rubit.html.erb -->
<div class="card mt-3 ml-3">
  <div class="card-body">
    <h5 class="card-title">@<%= rubit.user.email %></h5>
    <p class="card-text"><%= rubit.content %></p>
    <p class="text-muted small mb-0"><%= rubit.created_at.strftime("%b %e, %Y %l:%M %p") %></p>

    <!-- Form to create child rubit (comment) -->
    <%= form_with(model: [rubit, Rubit.new], url: rubits_path, local: true) do |form| %>
      <div class="mb-3 mt-3">
        <%= form.text_area :content, rows: 2, class: "form-control", placeholder: "Write a comment..." %>
        <%= form.hidden_field :parent_rubit_id, value: rubit.id %>
        <%= form.submit "Comment", class: "btn btn-sm btn-primary mt-1" %>
      </div>
    <% end %>

    <!-- Recursively render child rubits -->
    <%= render partial: 'rubits/rubit', collection: rubit.child_rubits, as: :rubit %>
  </div>
</div>
